pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
	iplr()
end

function _update()
	uplr()
end

function _draw()
	cls()
	map()
	dplr()
end
-->8
--player--

function iplr()
	plr={
	x=63,
	y=63,
	sp=1
	}
end

--[[
function move()
	if btn(⬇️) then	plr.y+=1 end
	if btn(⬆️) then plr.y-=1	end
	if btn(➡️) then plr.x+=1 end
	if btn(⬅️) then plr.x-=1 end
end
]]	

function uplr()
	move(plr)
	
end

function dplr()
	spr(plr.sp,plr.x,plr.y)
end
-->8
--collision--

--[[
if plr collides
	move plr back before drawing
	frame
]]	

function move(o)--move an object
	local lx=o.x --last x pos
	local ly=o.y --last x pos
	
	--shorter if then statement
	if (btn(⬆️)) o.y-=1
	if (btn(⬇️)) o.y+=1	
	if (btn(➡️)) o.x+=1
	if (btn(⬅️)) o.x-=1
	
	--if collides, move back
	if collide(o) then
		o.x=lx
		o.y=ly
	end
end

function collide(o)
	--get edges of plr
	local x1=o.x/8 -- left edge
	local y1=o.y/8 -- top edge
	local x2=(o.x+7)/8 --r edge
	local y2=(o.y+7)/8 --b edge
	
	--mget: get coordinate
	--fget: get flag
	
	--test if plr edges are touching a flag 
	local a=fget(mget(x1,y1),0)
	local b=fget(mget(x1,y2),0)
	local c=fget(mget(x2,y2),0)
	local d=fget(mget(x2,y1),0)
	
	if a or b or c or d then
		return true
	else 
		return false
	end 

end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000717777170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700771771770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000771111770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000012222100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000021221200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000022612200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000022162200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000021221200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000012222100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000001111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000111111110000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000110000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000110000110000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000111111111111111111000011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
